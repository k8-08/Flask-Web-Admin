# FastAPI Web Admin

<div align="center">

**åŸºäº FastAPI + Vue3 çš„ç°ä»£åŒ–ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿ**

ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å‰åç«¯åˆ†ç¦»ç®¡ç†å¹³å°ï¼Œå†…ç½®å®Œæ•´çš„ RBAC æƒé™ç³»ç»Ÿã€æ•°æ®æƒé™æ§åˆ¶å’ŒåŠ¨æ€è·¯ç”±æœºåˆ¶

[![Python](https://img.shields.io/badge/Python-3.13-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.111.0-green.svg)](https://fastapi.tiangolo.com/)
[![Vue](https://img.shields.io/badge/Vue-3.5.8-brightgreen.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## ğŸŒˆ é¡¹ç›®ä»‹ç»

FastAPI Web Admin æ˜¯ä¸€ä¸ªé¢å‘ä¼ä¸šçº§åº”ç”¨çš„ç°ä»£åŒ–åå°ç®¡ç†ç³»ç»Ÿè„šæ‰‹æ¶ï¼Œé‡‡ç”¨å‰åç«¯å®Œå…¨åˆ†ç¦»çš„æ¶æ„è®¾è®¡ã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- ğŸš€ å¼€ç®±å³ç”¨ï¼Œå¿«é€Ÿæ­å»ºä¼ä¸šåå°ç³»ç»Ÿ
- ğŸ” å®Œæ•´çš„ RBAC æƒé™ç®¡ç†ä½“ç³»ï¼ˆè§’è‰²-æƒé™-èœå•-æ•°æ®æƒé™ï¼‰
- ğŸ¯ åŠ¨æ€è·¯ç”±æ³¨å†Œï¼Œé…ç½®å³å¯åˆ†é…æƒé™
- ğŸ›¡ï¸ å¤šå±‚çº§æƒé™æ§åˆ¶ï¼ˆèœå•æƒé™ã€æŒ‰é’®æƒé™ã€æ•°æ®æƒé™ã€APIæƒé™ï¼‰
- ğŸ“Š å®Œå–„çš„æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼ˆç™»å½•æ—¥å¿—ã€æ“ä½œæ—¥å¿—ï¼‰
- ğŸ¨ æ”¯æŒä¸»é¢˜åˆ‡æ¢å’Œæš—é»‘æ¨¡å¼
- ğŸ“¦ Docker ä¸€é”®éƒ¨ç½²
- âš¡ å¼‚æ­¥é«˜æ€§èƒ½æ¶æ„
- ğŸ› ï¸ å¼€å‘è€…å‹å¥½ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘

---

## ğŸ“‹ æŠ€æœ¯æ ˆ

### ç¯å¢ƒè¦æ±‚

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Python | â‰¤ 3.13 | åç«¯è¿è¡Œç¯å¢ƒ |
| Node.js | 18.15.0 | å‰ç«¯æ„å»ºç¯å¢ƒ |
| MySQL | 8.0.23 | ä¸»æ•°æ®åº“ |
| Redis | 6.0.9 | ç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ— |

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| FastAPI | 0.111.0 | å¼‚æ­¥ Web æ¡†æ¶ |
| SQLAlchemy | 2.0.3 | å¼‚æ­¥ ORM |
| Pydantic | 2.7.3 | æ•°æ®éªŒè¯ |
| Alembic | 1.13.1 | æ•°æ®åº“è¿ç§» |
| Celery | 5.2.7 | å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ— |
| Redis | 5.0.4 | ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ— |
| Loguru | 0.6.0 | æ—¥å¿—ç³»ç»Ÿ |
| python-jose | 3.3.0 | JWT è®¤è¯ |
| asyncmy | 0.2.9 | å¼‚æ­¥ MySQL é©±åŠ¨ |

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue | 3.5.8 | æ¸è¿›å¼æ¡†æ¶ |
| Vite | 5.4.8 | æ„å»ºå·¥å…· |
| TypeScript | 4.9.4 | ç±»å‹ç³»ç»Ÿ |
| Element Plus | 2.7.4 | UI ç»„ä»¶åº“ |
| Pinia | 2.0.28 | çŠ¶æ€ç®¡ç† |
| Vue Router | 4.1.6 | è·¯ç”±ç®¡ç† |
| Axios | 1.2.1 | HTTP å®¢æˆ·ç«¯ |
| Monaco Editor | 0.34.1 | ä»£ç ç¼–è¾‘å™¨ |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·å±‚                               â”‚
â”‚                    (æµè§ˆå™¨ / ç§»åŠ¨ç«¯)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±‚ (Vue 3)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è·¯ç”±    â”‚  â”‚  çŠ¶æ€    â”‚  â”‚  ç»„ä»¶    â”‚  â”‚  æŒ‡ä»¤    â”‚   â”‚
â”‚  â”‚ Router   â”‚  â”‚  Pinia   â”‚  â”‚ Element  â”‚  â”‚ æƒé™æ§åˆ¶ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/HTTPS
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API ç½‘å…³å±‚ (FastAPI)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è®¤è¯    â”‚  â”‚  é™æµ    â”‚  â”‚  æ—¥å¿—    â”‚  â”‚  å¼‚å¸¸    â”‚   â”‚
â”‚  â”‚ ä¸­é—´ä»¶   â”‚  â”‚ ä¸­é—´ä»¶   â”‚  â”‚ ä¸­é—´ä»¶   â”‚  â”‚  å¤„ç†    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Services)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç”¨æˆ·    â”‚  â”‚  è§’è‰²    â”‚  â”‚  èœå•    â”‚  â”‚  æƒé™    â”‚   â”‚
â”‚  â”‚ æœåŠ¡     â”‚  â”‚ æœåŠ¡     â”‚  â”‚ æœåŠ¡     â”‚  â”‚  æœåŠ¡    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®è®¿é—®å±‚ (SQLAlchemy)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Models  â”‚  â”‚ Schemas  â”‚  â”‚  ä¼šè¯    â”‚  â”‚  äº‹åŠ¡    â”‚   â”‚
â”‚  â”‚  å®šä¹‰    â”‚  â”‚  éªŒè¯    â”‚  â”‚  ç®¡ç†    â”‚  â”‚  ç®¡ç†    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                               â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MySQL 8.0      â”‚          â”‚  Redis 6.0   â”‚  â”‚   Celery    â”‚
â”‚   ä¸»æ•°æ®åº“       â”‚          â”‚  ç¼“å­˜/é˜Ÿåˆ—   â”‚  â”‚  ä»»åŠ¡é˜Ÿåˆ—   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åç«¯åˆ†å±‚æ¶æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±å±‚ - å¤„ç† HTTP è¯·æ±‚
â”‚   â”‚   â”œâ”€â”€ v1/            # API ç‰ˆæœ¬æ§åˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ system/    # ç³»ç»Ÿç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth/  # è®¤è¯æˆæƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user/  # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ role/  # è§’è‰²ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ menu/  # èœå•ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dept/  # éƒ¨é—¨ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ permission/ # æƒé™ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ log/   # æ—¥å¿—ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ file/  # æ–‡ä»¶ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ business/  # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ monitor/   # ç›‘æ§æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ common/    # å…¬å…±æ¨¡å—
â”‚   â”‚   â””â”€â”€ __init__.py    # è·¯ç”±æ³¨å†Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒåŠŸèƒ½å±‚
â”‚   â”‚   â”œâ”€â”€ base_crud.py   # åŸºç¡€ CRUD æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ base_model.py  # åŸºç¡€æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ base_schema.py # åŸºç¡€ Schema
â”‚   â”‚   â”œâ”€â”€ permission.py  # æƒé™æ§åˆ¶æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ data_permission.py # æ•°æ®æƒé™è¿‡æ»¤
â”‚   â”‚   â””â”€â”€ api_permission.py  # APIæƒé™æ§åˆ¶
â”‚   â”‚
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹å±‚ - ORM æ¨¡å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ rbac_models.py # RBAC æƒé™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ system_models.py # ç³»ç»Ÿæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ api_models.py  # API æ¨¡å‹
â”‚   â”‚   â””â”€â”€ base.py        # åŸºç¡€æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/           # æ•°æ®éªŒè¯å±‚ - Pydantic æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ base.py        # åŸºç¡€ Schema
â”‚   â”‚   â”œâ”€â”€ common.py      # å…¬å…± Schema
â”‚   â”‚   â””â”€â”€ __init__.py    # Schema å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ sqlalchemy.py  # æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ redis.py       # Redis è¿æ¥é…ç½®
â”‚   â”‚   â””â”€â”€ __init__.py    # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ corelibs/          # æ ¸å¿ƒåº“
â”‚   â”‚   â”œâ”€â”€ codes.py       # çŠ¶æ€ç å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ consts.py      # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ logger.py      # æ—¥å¿—é…ç½®
â”‚   â”‚   â”œâ”€â”€ local.py       # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â””â”€â”€ custom_router.py # è‡ªå®šä¹‰è·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ common.py      # é€šç”¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ security.py    # å®‰å…¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ current_user.py # å½“å‰ç”¨æˆ·è·å–
â”‚   â”‚   â”œâ”€â”€ response.py    # å“åº”å·¥å…·
â”‚   â”‚   â””â”€â”€ serialize.py   # åºåˆ—åŒ–å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ exceptions/        # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”œâ”€â”€ exceptions.py  # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â””â”€â”€ __init__.py    # å¼‚å¸¸å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ init/              # åˆå§‹åŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ cors.py        # è·¨åŸŸé…ç½®
â”‚   â”‚   â”œâ”€â”€ exception.py   # å¼‚å¸¸å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ middleware.py  # ä¸­é—´ä»¶é…ç½®
â”‚   â”‚   â”œâ”€â”€ routers.py     # è·¯ç”±åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ __init__.py    # åˆå§‹åŒ–å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ log_middleware.py # æ—¥å¿—ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ __init__.py    # ä¸­é—´ä»¶å¯¼å‡º
â”‚   â”‚
â”‚   â””â”€â”€ common/            # å…¬å…±æ¨¡å—
â”‚       â”œâ”€â”€ constants.py   # å¸¸é‡å®šä¹‰
â”‚       â”œâ”€â”€ enums.py       # æšä¸¾å®šä¹‰
â”‚       â”œâ”€â”€ response.py    # å“åº”æ¨¡å‹
â”‚       â””â”€â”€ __init__.py    # å…¬å…±æ¨¡å—å¯¼å‡º
â”‚
â”œâ”€â”€ celery_worker/         # Celery ä»»åŠ¡
â”‚   â”œâ”€â”€ tasks/             # ä»»åŠ¡å®šä¹‰
â”‚   â”œâ”€â”€ scheduler/         # å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ worker.py          # Worker é…ç½®
â”‚   â””â”€â”€ base.py            # åŸºç¡€é…ç½®
â”‚
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ conftest.py        # æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ test_health.py     # å¥åº·æ£€æŸ¥æµ‹è¯•
â”‚   â””â”€â”€ __init__.py        # æµ‹è¯•åˆå§‹åŒ–
â”‚
â”œâ”€â”€ alembic/               # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ versions/          # è¿ç§»ç‰ˆæœ¬
â”‚   â”œâ”€â”€ env.py             # è¿ç§»ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ script.py.mako     # è¿ç§»è„šæœ¬æ¨¡æ¿
â”‚
â”œâ”€â”€ static/                # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ upload/            # ä¸Šä¼ æ–‡ä»¶
â”‚   â”œâ”€â”€ assets/            # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ swagger/           # API æ–‡æ¡£èµ„æº
â”‚
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ REFACTORING_PLAN.md # é‡æ„è®¡åˆ’
â”‚   â””â”€â”€ *.md               # å…¶ä»–æ–‡æ¡£
â”‚
â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.py                # åº”ç”¨å…¥å£
â”œâ”€â”€ start.py               # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ cli.py                 # CLI å·¥å…·
â”œâ”€â”€ init_permissions_simple.py # æƒé™åˆå§‹åŒ–
â””â”€â”€ requirements           # ä¾èµ–æ–‡ä»¶
```

### å‰ç«¯ç›®å½•æ¶æ„

```
frontend/src/
â”œâ”€â”€ api/                   # API æ¥å£å°è£…
â”‚   â”œâ”€â”€ v1/                # API ç‰ˆæœ¬æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ system/        # ç³»ç»Ÿç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts    # ç”¨æˆ·æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ role.ts    # è§’è‰²æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ menu.ts    # èœå•æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ dept.ts    # éƒ¨é—¨æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ permission.ts # æƒé™æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ log.ts     # æ—¥å¿—æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ file.ts    # æ–‡ä»¶æ¥å£
â”‚   â”‚   â”œâ”€â”€ monitor/       # ç›‘æ§æ¥å£
â”‚   â”‚   â””â”€â”€ common/        # å…¬å…±æ¥å£
â”‚   â””â”€â”€ request.ts         # è¯·æ±‚å°è£…
â”‚
â”œâ”€â”€ components/            # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ Z-Table/           # è¡¨æ ¼ç»„ä»¶
â”‚   â”œâ”€â”€ iconSelector/      # å›¾æ ‡é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ monaco/            # ä»£ç ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ seePictures/       # å›¾ç‰‡é¢„è§ˆ
â”‚   â”œâ”€â”€ svgIcon/           # SVG å›¾æ ‡
â”‚   â””â”€â”€ ZeroCard/          # å¡ç‰‡ç»„ä»¶
â”‚
â”œâ”€â”€ layout/                # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ navBars/           # å¯¼èˆªæ 
â”‚   â”œâ”€â”€ navMenu/           # èœå•
â”‚   â”œâ”€â”€ main/              # ä¸»ä½“å†…å®¹
â”‚   â””â”€â”€ tagsView/          # æ ‡ç­¾é¡µ
â”‚
â”œâ”€â”€ views/                 # é¡µé¢è§†å›¾
â”‚   â”œâ”€â”€ system/            # ç³»ç»Ÿç®¡ç†
â”‚   â”‚   â”œâ”€â”€ user/          # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ role/          # è§’è‰²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ menu/          # èœå•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ dept/          # éƒ¨é—¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ permission/    # æƒé™ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ loginRecord/   # ç™»å½•æ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ operationLog/  # æ“ä½œæ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ file/          # æ–‡ä»¶ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ dic/           # å­—å…¸ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ lookup/        # æŸ¥æ‰¾è¡¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ project/       # é¡¹ç›®ç®¡ç†
â”‚   â”‚   â””â”€â”€ personal/      # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ monitor/           # ç³»ç»Ÿç›‘æ§
â”‚   â”‚   â”œâ”€â”€ online/        # åœ¨çº¿ç”¨æˆ·
â”‚   â”‚   â””â”€â”€ server/        # æœåŠ¡å™¨ç›‘æ§
â”‚   â”œâ”€â”€ home/              # é¦–é¡µ
â”‚   â”œâ”€â”€ login/             # ç™»å½•é¡µ
â”‚   â””â”€â”€ error/             # é”™è¯¯é¡µé¢
â”‚
â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.ts           # è·¯ç”±å…¥å£
â”‚   â”œâ”€â”€ route.ts           # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ backEnd.ts         # åç«¯è·¯ç”±å¤„ç†
â”‚
â”œâ”€â”€ stores/                # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ user.ts            # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ menu.ts            # èœå•çŠ¶æ€
â”‚   â”œâ”€â”€ routesList.ts      # è·¯ç”±çŠ¶æ€
â”‚   â”œâ”€â”€ tagsViewRoutes.ts  # æ ‡ç­¾é¡µçŠ¶æ€
â”‚   â”œâ”€â”€ themeConfig.ts     # ä¸»é¢˜é…ç½®
â”‚   â””â”€â”€ index.ts           # çŠ¶æ€ç®¡ç†å…¥å£
â”‚
â”œâ”€â”€ directive/             # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”œâ”€â”€ authDirective.ts   # æƒé™æŒ‡ä»¤ v-auth
â”‚   â”œâ”€â”€ clickOutside.ts    # ç‚¹å‡»å¤–éƒ¨æŒ‡ä»¤
â”‚   â””â”€â”€ index.ts           # æŒ‡ä»¤å…¥å£
â”‚
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ request.ts         # HTTP è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ authFunction.ts    # æƒé™éªŒè¯å‡½æ•°
â”‚   â”œâ”€â”€ common.ts          # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ storage.ts         # å­˜å‚¨å·¥å…·
â”‚   â”œâ”€â”€ formatTime.ts      # æ—¶é—´æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ config.ts          # é…ç½®å·¥å…·
â”‚   â””â”€â”€ other.ts           # å…¶ä»–å·¥å…·
â”‚
â”œâ”€â”€ types/                 # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ global.d.ts        # å…¨å±€ç±»å‹
â”‚   â”œâ”€â”€ views.d.ts         # è§†å›¾ç±»å‹
â”‚   â”œâ”€â”€ layout.d.ts        # å¸ƒå±€ç±»å‹
â”‚   â””â”€â”€ axios.d.ts         # è¯·æ±‚ç±»å‹
â”‚
â”œâ”€â”€ theme/                 # ä¸»é¢˜é…ç½®
â”‚   â”œâ”€â”€ index.scss         # ä¸»é¢˜å…¥å£
â”‚   â”œâ”€â”€ app.scss           # åº”ç”¨æ ·å¼
â”‚   â”œâ”€â”€ dark.scss          # æš—è‰²ä¸»é¢˜
â”‚   â”œâ”€â”€ element.scss       # Element Plus æ ·å¼
â”‚   â””â”€â”€ common/            # å…¬å…±æ ·å¼
â”‚
â”œâ”€â”€ icons/                 # å›¾æ ‡èµ„æº
â”‚   â”œâ”€â”€ svg/               # SVG å›¾æ ‡
â”‚   â”œâ”€â”€ iconify/           # Iconify å›¾æ ‡
â”‚   â””â”€â”€ index.ts           # å›¾æ ‡å…¥å£
â”‚
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ assets.ts          # èµ„æºé…ç½®
â”‚
â”œâ”€â”€ App.vue                # æ ¹ç»„ä»¶
â””â”€â”€ main.ts                # åº”ç”¨å…¥å£
```

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### åç«¯æ ¸å¿ƒåŠŸèƒ½

#### 1. å¼‚æ­¥é«˜æ€§èƒ½æ¶æ„
- FastAPI å¼‚æ­¥æ¡†æ¶ï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- SQLAlchemy 2.0 å¼‚æ­¥ ORMï¼Œæå‡æ•°æ®åº“æ“ä½œæ€§èƒ½
- Redis å¼‚æ­¥è¿æ¥æ± ï¼Œä¼˜åŒ–ç¼“å­˜è®¿é—®
- å¼‚æ­¥ MySQL é©±åŠ¨ (asyncmy)ï¼Œæå‡æ•°æ®åº“è¿æ¥æ€§èƒ½

#### 2. å®Œå–„çš„æƒé™ç®¡ç†ç³»ç»Ÿ
- **RBAC æƒé™æ¨¡å‹**ï¼šç”¨æˆ·-è§’è‰²-æƒé™-èœå•å››å±‚æƒé™ä½“ç³»
- **èœå•æƒé™**ï¼šæ§åˆ¶é¡µé¢å’Œèœå•çš„æ˜¾ç¤ºæƒé™
- **æŒ‰é’®æƒé™**ï¼šç²¾ç¡®æ§åˆ¶é¡µé¢å†…æŒ‰é’®çš„æ“ä½œæƒé™
- **æ•°æ®æƒé™**ï¼šæ”¯æŒ5ç§æ•°æ®èŒƒå›´ï¼ˆä»…æœ¬äººã€æœ¬éƒ¨é—¨ã€æœ¬éƒ¨é—¨åŠä»¥ä¸‹ã€å…¨éƒ¨ã€è‡ªå®šä¹‰ï¼‰
- **APIæƒé™**ï¼šæ¥å£çº§åˆ«çš„è®¿é—®æ§åˆ¶
- **æƒé™è£…é¥°å™¨**ï¼š`@DataPermission` å’Œ `@ApiPermission` è£…é¥°å™¨

#### 3. å®Œå–„çš„ä¸­é—´ä»¶ç³»ç»Ÿ
- **è®¤è¯ä¸­é—´ä»¶**ï¼šJWT Token éªŒè¯å’Œç”¨æˆ·èº«ä»½è¯†åˆ«
- **æ—¥å¿—ä¸­é—´ä»¶**ï¼šè¯·æ±‚/å“åº”æ—¥å¿—è®°å½•ï¼Œtrace_id è¿½è¸ª
- **é™æµä¸­é—´ä»¶**ï¼šAPI è®¿é—®é¢‘ç‡æ§åˆ¶
- **å¼‚å¸¸ä¸­é—´ä»¶**ï¼šç»Ÿä¸€å¼‚å¸¸æ•è·å’Œå“åº”æ ¼å¼åŒ–

#### 4. ä¼ä¸šçº§æ—¥å¿—ç®¡ç†
- **ç™»å½•æ—¥å¿—**ï¼šè®°å½•ç”¨æˆ·ç™»å½•è¡Œä¸ºã€IPåœ°å€ã€è®¾å¤‡ä¿¡æ¯
- **æ“ä½œæ—¥å¿—**ï¼šè®°å½•ç”¨æˆ·æ“ä½œè¡Œä¸ºã€è¯·æ±‚å‚æ•°ã€å“åº”ç»“æœ
- **æ—¥å¿—æŸ¥è¯¢**ï¼šæ”¯æŒå¤šæ¡ä»¶æŸ¥è¯¢ã€æ—¶é—´èŒƒå›´ç­›é€‰
- **æ—¥å¿—ç®¡ç†**ï¼šæ”¯æŒæ‰¹é‡åˆ é™¤ã€å®šæœŸæ¸…ç†åŠŸèƒ½

#### 5. åˆ†å±‚æ¶æ„è®¾è®¡
- **API å±‚**ï¼šå¤„ç† HTTP è¯·æ±‚ï¼Œå‚æ•°éªŒè¯
- **Core å±‚**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œæƒé™æ§åˆ¶
- **Models å±‚**ï¼šæ•°æ®æ¨¡å‹å®šä¹‰ï¼Œæ•°æ®åº“æ˜ å°„
- **Schemas å±‚**ï¼šæ•°æ®éªŒè¯ï¼Œåºåˆ—åŒ–/ååºåˆ—åŒ–

#### 6. ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ
- Celery å¼‚æ­¥ä»»åŠ¡å¤„ç†
- Celery Beat å®šæ—¶ä»»åŠ¡è°ƒåº¦
- æ•°æ®åº“æŒä¹…åŒ–ä»»åŠ¡çŠ¶æ€
- è‡ªå®šä¹‰è°ƒåº¦å™¨æ”¯æŒ

#### 7. æ•°æ®åº“ç®¡ç†
- Alembic æ•°æ®åº“è¿ç§»
- ä¸€é”®åˆå§‹åŒ–è„šæœ¬
- è‡ªåŠ¨ç”Ÿæˆè¿ç§»æ–‡ä»¶
- æ”¯æŒå¤šç¯å¢ƒé…ç½®

### å‰ç«¯æ ¸å¿ƒåŠŸèƒ½

#### 1. åŠ¨æ€è·¯ç”±ç³»ç»Ÿ
- åç«¯é…ç½®èœå•ï¼Œå‰ç«¯è‡ªåŠ¨æ³¨å†Œè·¯ç”±
- æ”¯æŒå¤šçº§åµŒå¥—è·¯ç”±
- è·¯ç”±æ‡’åŠ è½½ï¼Œä¼˜åŒ–é¦–å±æ€§èƒ½
- åŠ¨æ€é¢åŒ…å±‘å¯¼èˆª

#### 2. å¤šå±‚çº§æƒé™æ§åˆ¶ä½“ç³»
- **è·¯ç”±çº§æƒé™**ï¼šæ ¹æ®è§’è‰²åŠ¨æ€ç”Ÿæˆèœå•
- **æŒ‰é’®çº§æƒé™**ï¼šv-auth æŒ‡ä»¤æ§åˆ¶æŒ‰é’®æ˜¾ç¤º
- **æ¥å£çº§æƒé™**ï¼šåç«¯ API æƒé™éªŒè¯
- **æ•°æ®çº§æƒé™**ï¼šæ ¹æ®ç”¨æˆ·æƒé™è¿‡æ»¤æ•°æ®

#### 3. å®Œå–„çš„ç”¨æˆ·ç•Œé¢
- **ç»Ÿä¸€è¡¨æ ¼æ ·å¼**ï¼šæ‰€æœ‰è¡¨æ ¼æ”¯æŒæ–‘é©¬çº¿æ ·å¼
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒå¤šé€‰ã€æ‰¹é‡åˆ é™¤ç­‰æ“ä½œ
- **è¯¦æƒ…æŸ¥çœ‹**ï¼šæ”¯æŒæ•°æ®è¯¦æƒ…å¼¹çª—å±•ç¤º
- **æœç´¢è¿‡æ»¤**ï¼šæ”¯æŒå¤šæ¡ä»¶æœç´¢å’Œæ—¶é—´èŒƒå›´ç­›é€‰

#### 4. ä¸»é¢˜ç³»ç»Ÿ
- äº®è‰²/æš—è‰²ä¸»é¢˜åˆ‡æ¢
- è‡ªå®šä¹‰ä¸»é¢˜é…ç½®
- ä¸»é¢˜æŒä¹…åŒ–å­˜å‚¨
- Element Plus ä¸»é¢˜å®šåˆ¶

#### 5. çŠ¶æ€ç®¡ç†
- Pinia çŠ¶æ€ç®¡ç†
- æŒä¹…åŒ–æ’ä»¶æ”¯æŒ
- æ¨¡å—åŒ–çŠ¶æ€è®¾è®¡
- å“åº”å¼æ•°æ®æ›´æ–°

#### 6. å¼€å‘ä½“éªŒ
- TypeScript ç±»å‹æ”¯æŒ
- Monaco Editor ä»£ç ç¼–è¾‘
- çƒ­æ›´æ–°å¼€å‘ç¯å¢ƒ
- å®Œå–„çš„é”™è¯¯å¤„ç†

---

## ğŸš€ å¿«é€Ÿå¼€å§‹
### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/rebort-hub/fastapiwebadmin.git
cd fastapiwebadmin
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“å¯†ç ç­‰ä¿¡æ¯
```

#### 3. å¯åŠ¨æœåŠ¡

```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### 4. è®¿é—®ç³»ç»Ÿ

- å‰ç«¯åœ°å€ï¼šhttp://localhost
- åç«¯ APIï¼šhttp://localhost:8100
- API æ–‡æ¡£ï¼šhttp://localhost:8100/docs

**é»˜è®¤è´¦å·**ï¼šadmin / admin123456

---

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

#### åç«¯éƒ¨ç½²

##### 1. ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿å·²å®‰è£… Python 3.13ã€MySQL 8.0ã€Redis 6.0
python --version
mysql --version
redis-server --version
```

##### 2. åˆ›å»ºæ•°æ®åº“

```sql
CREATE DATABASE fastapiwebadmin CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

##### 3. é…ç½®ç¯å¢ƒ

```bash
cd backend

# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯
# MYSQL_DATABASE_URI=mysql+asyncmy://ç”¨æˆ·å:å¯†ç @localhost:3306/fastapiwebadmin
# REDIS_URI=redis://localhost:6379/4
```

##### 4. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
pip install -r requirements -i https://mirrors.aliyun.com/pypi/simple
```

##### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
# ä¸€é”®åˆå§‹åŒ–ï¼ˆæ¨èï¼‰
python cli.py init-db

# åˆå§‹åŒ–æƒé™æ•°æ®
python init_permissions_simple.py

# æˆ–æ‰‹åŠ¨ä½¿ç”¨ Alembic
alembic upgrade head
python cli.py init-data
```

##### 6. å¯åŠ¨åç«¯æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
python main.py

# ç”Ÿäº§æ¨¡å¼
gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker -b 0.0.0.0:8100
```

##### 7. å¯åŠ¨ Celeryï¼ˆå¯é€‰ï¼‰

```bash
# Windows å¯åŠ¨ Workerï¼ˆå•çº¿ç¨‹ï¼‰
celery -A celery_worker.worker.celery worker --pool=solo -l INFO

# Linux å¯åŠ¨ Workerï¼ˆå¤šçº¿ç¨‹ï¼‰
celery -A celery_worker.worker.celery worker --loglevel=INFO -c 10 -P solo -n fastapiwebadmin-celery-worker

# å¯åŠ¨å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
celery -A celery_worker.worker.celery beat -S celery_worker.scheduler.schedulers:DatabaseScheduler -l INFO

# å¯åŠ¨å¿ƒè·³ç›‘æ§
celery -A celery_worker.worker.celery beat -l INFO
```

#### å‰ç«¯éƒ¨ç½²

##### 1. ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿å·²å®‰è£… Node.js 18.15.0
node -v  # v18.15.0
```

##### 2. å®‰è£…ä¾èµ–ç®¡ç†å·¥å…·

```bash
# å®‰è£… cnpmï¼ˆä½¿ç”¨æ·˜å®é•œåƒï¼‰
npm install -g cnpm --registry=https://registry.npm.taobao.org

# æˆ–å®‰è£… yarn
npm install -g yarn
```

##### 3. å®‰è£…é¡¹ç›®ä¾èµ–

```bash
cd frontend

# ä½¿ç”¨ cnpm
cnpm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

##### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ä½¿ç”¨ cnpm
cnpm run dev

# æˆ–ä½¿ç”¨ yarn
yarn dev
```

è®¿é—®ï¼šhttp://localhost:5173

##### 5. ç”Ÿäº§æ„å»º

```bash
# ä½¿ç”¨ cnpm
cnpm run build

# æˆ–ä½¿ç”¨ yarn
yarn build

# æ„å»ºäº§ç‰©åœ¨ dist/ ç›®å½•
```

---

## ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†

### Alembic è¿ç§»å‘½ä»¤

```bash
# åˆå§‹åŒ–æ•°æ®åº“ï¼ˆåŒ…å«è¿ç§»å’Œåˆå§‹æ•°æ®ï¼‰
python cli.py init-db

# ç”Ÿæˆè¿ç§»æ–‡ä»¶
alembic revision --autogenerate -m "æè¿°ä¿¡æ¯"

# æ‰§è¡Œè¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1

# æŸ¥çœ‹è¿ç§»å†å²
alembic history

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
alembic current
```

### æ•°æ®åº“è„šæœ¬

å¦‚æœéœ€è¦æ‰‹åŠ¨å¯¼å…¥æ•°æ®åº“ï¼š

```bash
# å¯¼å…¥åˆå§‹åŒ–è„šæœ¬
mysql -u root -p fastapiwebadmin < backend/db_script/db_init.sql

# åˆå§‹åŒ–æƒé™æ•°æ®
cd backend
python init_permissions_simple.py

# åˆå§‹åŒ–æ—¥å¿—æƒé™ï¼ˆå¦‚æœéœ€è¦ï¼‰
python init_log_permissions.py
```

---

## ğŸ“¸ ç³»ç»Ÿæˆªå›¾

### ç™»å½•é¡µ
![ç™»å½•é¡µ](static/img/func.png)

### é¦–é¡µ
![é¦–é¡µ](static/img/index.png)

### è·¯ç”±èœå•ç®¡ç†
![è·¯ç”±èœå•ç®¡ç†](static/img/report.png)

### æ¥å£ç®¡ç†
![æ¥å£ç®¡ç†1](static/img/case.png)
![æ¥å£ç®¡ç†2](static/img/cass.png)

### ä¸ªäººä¸­å¿ƒ
![ä¸ªäººä¸­å¿ƒ1](static/img/ge.png)
![ä¸ªäººä¸­å¿ƒ2](static/img/gen.png)

### ä¸»é¢˜åˆ‡æ¢
![ä¸»é¢˜åˆ‡æ¢1](static/img/csssb.png)
![ä¸»é¢˜åˆ‡æ¢2](static/img/csssa.png)
![ä¸»é¢˜åˆ‡æ¢3](static/img/qy.png)

---

## ğŸ”§ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

#### æ·»åŠ æ–°çš„ API æ¥å£

1. åœ¨ `app/models/` åˆ›å»ºæ•°æ®æ¨¡å‹
2. åœ¨ `app/schemas/` åˆ›å»º Pydantic Schema
3. åœ¨ `app/api/v1/` åˆ›å»ºè·¯ç”±å¤„ç†å™¨
4. ä½¿ç”¨æƒé™è£…é¥°å™¨æ§åˆ¶è®¿é—®æƒé™

#### ç¤ºä¾‹ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†æ¥å£

```python
# app/models/rbac_models.py
from app.models.base import Base
from sqlalchemy import Column, String, Integer

class User(Base):
    __tablename__ = "sys_user"
    
    username = Column(String(50), nullable=False, unique=True, comment='ç”¨æˆ·å')
    email = Column(String(100), nullable=True, comment='é‚®ç®±')
    status = Column(Integer, nullable=False, default=1, comment='çŠ¶æ€')

# app/schemas/common.py
from pydantic import BaseModel
from typing import Optional

class UserCreate(BaseModel):
    username: str
    email: Optional[str] = None
    status: int = 1

class UserResponse(BaseModel):
    id: int
    username: str
    email: Optional[str]
    status: int

# app/api/v1/system/user/controller.py
from fastapi import APIRouter, Depends
from app.core.api_permission import ApiPermission
from app.core.data_permission import DataPermission

router = APIRouter()

@router.post("/", response_model=UserResponse)
@ApiPermission("system:user:add")  # APIæƒé™æ§åˆ¶
async def create_user(user: UserCreate):
    # ä¸šåŠ¡é€»è¾‘
    pass

@router.get("/", response_model=List[UserResponse])
@ApiPermission("system:user:list")
@DataPermission(data_scope="dept")  # æ•°æ®æƒé™æ§åˆ¶
async def get_users():
    # ä¸šåŠ¡é€»è¾‘
    pass
```

#### æƒé™ç³»ç»Ÿä½¿ç”¨

```python
# æ•°æ®æƒé™è£…é¥°å™¨
@DataPermission(
    data_scope="dept",  # æ•°æ®èŒƒå›´ï¼šdept, user, all, custom
    dept_field="dept_id",  # éƒ¨é—¨å­—æ®µå
    user_field="created_by"  # ç”¨æˆ·å­—æ®µå
)
async def get_filtered_data():
    # ä¼šè‡ªåŠ¨æ ¹æ®ç”¨æˆ·æƒé™è¿‡æ»¤æ•°æ®
    pass

# APIæƒé™è£…é¥°å™¨
@ApiPermission("system:user:edit")
async def update_user():
    # ä¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰å¯¹åº”çš„APIæƒé™
    pass
```

### å‰ç«¯å¼€å‘

#### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/views/` åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `src/router/routes.ts` é…ç½®è·¯ç”±
3. åœ¨ `src/api/` åˆ›å»ºæ¥å£è°ƒç”¨
4. åœ¨åå°èœå•ç®¡ç†ä¸­é…ç½®èœå•

#### ç¤ºä¾‹ï¼šåˆ›å»ºç”¨æˆ·åˆ—è¡¨é¡µé¢

```typescript
// src/api/user.ts
import request from './request'

export const getUserList = (params: any) => {
  return request.get('/api/v1/users', { params })
}

// src/views/system/user/index.vue
<template>
  <div class="user-container">
    <el-table :data="userList">
      <el-table-column prop="username" label="ç”¨æˆ·å" />
      <el-table-column prop="email" label="é‚®ç®±" />
    </el-table>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { getUserList } from '@/api/user'

const userList = ref([])

onMounted(async () => {
  const res = await getUserList({})
  userList.value = res.data
})
</script>

// src/router/routes.ts
{
  path: '/system/user',
  name: 'SystemUser',
  component: () => import('@/views/system/user/index.vue'),
  meta: { title: 'ç”¨æˆ·ç®¡ç†', permission: 'system:user:list' }
}
```

#### æƒé™æ§åˆ¶

```vue
<!-- æŒ‰é’®çº§æƒé™æ§åˆ¶ -->
<el-button v-auth="'system:user:add'">æ–°å¢ç”¨æˆ·</el-button>
<el-button v-auth="'system:user:edit'">ç¼–è¾‘</el-button>
<el-button v-auth="'system:user:delete'">åˆ é™¤</el-button>

<!-- æ‰¹é‡æ“ä½œæƒé™æ§åˆ¶ -->
<el-button v-auth="'system:user:delete'" :disabled="selectedRows.length === 0">
  æ‰¹é‡åˆ é™¤
</el-button>

<!-- è¡¨æ ¼é…ç½® -->
<z-table
  :columns="columns"
  :data="tableData"
  :options="{ stripe: true, border: true }"
  @selection-change="handleSelectionChange"
>
  <!-- æ·»åŠ é€‰æ‹©åˆ— -->
  { columnType: 'selection', width: '50', align: 'center' }
</z-table>
```

#### æ—¥å¿—ç®¡ç†åŠŸèƒ½

```vue
<!-- ç™»å½•æ—¥å¿—é¡µé¢ç¤ºä¾‹ -->
<template>
  <div class="login-record-container">
    <!-- æœç´¢æ¡ä»¶ -->
    <div class="search-form">
      <el-input v-model="queryParams.username" placeholder="ç”¨æˆ·å" />
      <el-date-picker v-model="dateRange" type="datetimerange" />
      <el-button @click="search">æŸ¥è¯¢</el-button>
      <el-button v-auth="'system:log:login:delete'" @click="batchDelete">
        æ‰¹é‡åˆ é™¤
      </el-button>
      <el-button v-auth="'system:log:login:clean'" @click="clearLogs">
        æ¸…ç†æ—¥å¿—
      </el-button>
    </div>
    
    <!-- æ•°æ®è¡¨æ ¼ -->
    <z-table
      :columns="columns"
      :data="logData"
      :options="{ stripe: true, border: true }"
      @selection-change="handleSelectionChange"
    />
  </div>
</template>
```

---

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•

```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
pytest tests/test_user.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app --cov-report=html

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open htmlcov/index.html
```

### å‰ç«¯æµ‹è¯•

```bash
cd frontend

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œ E2E æµ‹è¯•
npm run test:e2e
```

---

## ğŸ“¦ éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
docker-compose -f docker-compose.prod.yml up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend

# é‡å¯æœåŠ¡
docker-compose restart backend
```

#### æ‰‹åŠ¨éƒ¨ç½²

**åç«¯éƒ¨ç½²ï¼š**

```bash
# ä½¿ç”¨ Gunicorn + Uvicorn
gunicorn main:app \
  -w 4 \
  -k uvicorn.workers.UvicornWorker \
  -b 0.0.0.0:8100 \
  --access-logfile logs/access.log \
  --error-logfile logs/error.log
```

**å‰ç«¯éƒ¨ç½²ï¼š**

```bash
# æ„å»º
npm run build

# ä½¿ç”¨ Nginx éƒ¨ç½²
# å°† dist/ ç›®å½•å†…å®¹å¤åˆ¶åˆ° Nginx é™æ€ç›®å½•
cp -r dist/* /usr/share/nginx/html/
```

**Nginx é…ç½®ç¤ºä¾‹ï¼š**

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API ä»£ç†
    location /api {
        proxy_pass http://localhost:8100;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### åç«¯é—®é¢˜

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ**

A: æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®ï¼Œç¡®ä¿ MySQL æœåŠ¡å·²å¯åŠ¨ã€‚

**Q: Redis è¿æ¥å¤±è´¥ï¼Ÿ**

A: ç¡®ä¿ Redis æœåŠ¡å·²å¯åŠ¨ï¼Œæ£€æŸ¥ `REDIS_URI` é…ç½®ã€‚

**Q: Celery ä»»åŠ¡ä¸æ‰§è¡Œï¼Ÿ**

A: ç¡®ä¿ Celery Worker å’Œ Beat éƒ½å·²å¯åŠ¨ï¼Œæ£€æŸ¥ Redis è¿æ¥ã€‚

### å‰ç«¯é—®é¢˜

**Q: å¯åŠ¨æŠ¥é”™ "Cannot find module"ï¼Ÿ**

A: åˆ é™¤ `node_modules` å’Œ `package-lock.json`ï¼Œé‡æ–°å®‰è£…ä¾èµ–ã€‚

**Q: æ¥å£è¯·æ±‚ 404ï¼Ÿ**

A: æ£€æŸ¥ `src/config/` ä¸­çš„ API åœ°å€é…ç½®ã€‚

**Q: æƒé™æ§åˆ¶ä¸ç”Ÿæ•ˆï¼Ÿ**

A: 
1. ç¡®ä¿åå°å·²é…ç½®èœå•æƒé™ï¼Œå¹¶åˆ†é…ç»™å¯¹åº”è§’è‰²
2. æ£€æŸ¥æƒé™ç¼–ç æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚ï¼š`system:user:add`ï¼‰
3. ç¡®è®¤ç”¨æˆ·å·²åˆ†é…ç›¸åº”è§’è‰²
4. æ£€æŸ¥å‰ç«¯ v-auth æŒ‡ä»¤ä½¿ç”¨æ˜¯å¦æ­£ç¡®

**Q: æ•°æ®æƒé™ä¸ç”Ÿæ•ˆï¼Ÿ**

A: 
1. ç¡®ä¿åœ¨æ¥å£ä¸Šä½¿ç”¨äº† `@DataPermission` è£…é¥°å™¨
2. æ£€æŸ¥ç”¨æˆ·è§’è‰²çš„æ•°æ®æƒé™èŒƒå›´é…ç½®
3. ç¡®è®¤æ•°æ®è¡¨ä¸­æœ‰å¯¹åº”çš„éƒ¨é—¨å­—æ®µæˆ–ç”¨æˆ·å­—æ®µ

**Q: æ—¥å¿—è®°å½•ä¸å®Œæ•´ï¼Ÿ**

A: 
1. ç¡®ä¿æ—¥å¿—ä¸­é—´ä»¶å·²æ­£ç¡®é…ç½®
2. æ£€æŸ¥æ•°æ®åº“ä¸­çš„æ—¥å¿—è¡¨æ˜¯å¦å­˜åœ¨
3. ç¡®è®¤ Redis è¿æ¥æ­£å¸¸ï¼ˆç”¨äºæ—¥å¿—ç¼“å­˜ï¼‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

### ä»£ç è§„èŒƒ

**åç«¯ï¼š**
- éµå¾ª PEP 8 è§„èŒƒ
- ä½¿ç”¨ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•

**å‰ç«¯ï¼š**
- éµå¾ª Vue 3 é£æ ¼æŒ‡å—
- ä½¿ç”¨ TypeScript
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) åè®®å¼€æºã€‚

---

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub**: https://github.com/rebort-hub/fastapiwebadmin
- **FastAPI æ–‡æ¡£**: https://fastapi.tiangolo.com/
- **Vue 3 æ–‡æ¡£**: https://vuejs.org/
- **Element Plus æ–‡æ¡£**: https://element-plus.org/

---

## ğŸ’¬ äº¤æµç¾¤

### å¾®ä¿¡ç¾¤
<img src="static/img/weixin.png" width="200" alt="å¾®ä¿¡ç¾¤" />

### QQ ç¾¤
<img src="static/img/qq.png" width="200" alt="QQç¾¤" />

æ¬¢è¿åŠ å…¥äº¤æµç¾¤ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼

---

## ğŸ’Œ æ”¯æŒä½œè€…

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·åœ¨ [GitHub](https://github.com/rebort-hub/fastapiwebadmin) ä¸Šç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼

ä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­æ›´æ–°çš„åŠ¨åŠ› ğŸš€

---

<div align="center">

**Made with â¤ï¸ by Rebort**

</div>
